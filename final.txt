#include <stdio.h>
#include <sys/stat.h>

int main(int argc, char* argv[])
{
if (argc < 2) {
printf("Nhập tên tập tin hoặc thư mục là tham số đầu tiên\n");
return 1;
}

char* file_name = argv[1];
struct stat file_stat;

if (stat(file_name, &file_stat) < 0) {
printf("Không thể lấy thuộc tính của tập tin hoặc thư mục\n");
return 1;
}

printf("Kích thước: %lld bytes\n", file_stat.st_size);
printf("Loại tập tin: ");
if (S_ISREG(file_stat.st_mode)) printf("Tập tin thông thường\n");
else if (S_ISDIR(file_stat.st_mode)) printf("Thư mục\n");
else printf("Loại tập tin khác\n");
printf("Quyền truy cập: ");
printf( (file_stat.st_mode & S_IRUSR) ? "r" : "-");
printf( (file_stat.st_mode & S_IWUSR) ? "w" : "-");
printf( (file_stat.st_mode & S_IXUSR) ? "x" : "-");
printf( (file_stat.st_mode & S_IRGRP) ? "r" : "-");
printf( (file_stat.st_mode & S_IWGRP) ? "w" : "-");
printf( (file_stat.st_mode & S_IXGRP) ? "x" : "-");
printf( (file_stat.st_mode & S_IROTH) ? "r" : "-");
printf( (file_stat.st_mode & S_IWOTH) ? "w" : "-");
printf( (file_stat.st_mode & S_IXOTH) ? "x" : "-");
printf("\n");

printf("ID user: %d\n", file_stat.st_uid);          
printf("ID group: %d\n", file_stat.st_gid);          
printf("Size: %ld\n", file_stat.st_size);         
    
return 0;
}